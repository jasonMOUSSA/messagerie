$(document).ready(function(){
	//login user
	$("#login").click(function(){
		//remove les erreurs
		$('.text-danger').remove();
		$('.form-group').removeClass('has-error').removeClass('has-success');
		//create variable for the user
		var username = $('#username').val().trim();
		var password = $('#password').val().trim();
		//test s'il y'a des erreurs
		if (username == "") {
			$('#username').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#username').closest('.form-group').addClass('has-error');
		}else{
			$('#username').find('.text-danger').remove();
			$('#username').closest('.form-group').addClass('has-success');
		}
		if (password == "") {
			$('#password').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#password').closest('.form-group').addClass('has-error');
		}else{
			$('#password').find('.text-danger').remove();
			$('#password').closest('.form-group').addClass('has-success');
		}
		if (username && password) {
			$.ajax({
				url:"scriptphp/script_loginuser.php",
				method:"POST",
				data:$('#formloginuser').serialize(),
				success:function(data){
					if(data == 0){
						$("#message_results").html('<div class="alert alert-warning alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong><i class="glyphicon glyphicon-exclamation-sign"></i> Votre login ou password est incorrect<strong></div>');
					}
					if(data == 1){
						window.location="index.php?page=dashboard";
					}
				}
			});
		}	
		return false;
	})
	//fin login

	$("#formregisteruser").unbind('submit').bind('submit', function(){
		//remove les erreurs
		$('.text-danger').remove();
		$('.form-group').removeClass('has-error').removeClass('has-success');
		//create variable for the user

		var firstname = $('#firstname').val().trim();
		var Lastname = $('#Lastname').val().trim();
		var emailuser = $('#emailuser').val().trim();
		var numberphone = $('#numberphone').val().trim();
		var imageuser = $('#imageuser').val().trim();
		var usernames = $('#usernames').val().trim();
		var passwords = $('#passwords').val().trim();
		var reapetpassword = $('#reapetpassword').val().trim();
		//test s'il y'a des erreurs
		if (firstname == "") {
			$('#firstname').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#firstname').closest('.form-group').addClass('has-error');
		}else{
			$('#firstname').find('.text-danger').remove();
			$('#firstname').closest('.form-group').addClass('has-success');
		}
		if (Lastname == "") {
			$('#Lastname').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#Lastname').closest('.form-group').addClass('has-error');
		}else{
			$('#Lastname').find('.text-danger').remove();
			$('#Lastname').closest('.form-group').addClass('has-success');
		}
		if (emailuser == "") {
			$('#emailuser').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#emailuser').closest('.form-group').addClass('has-error');
		}else{
			$('#emailuser').find('.text-danger').remove();
			$('#emailuser').closest('.form-group').addClass('has-success');
		}
		if (numberphone == "") {
			$('#numberphone').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#numberphone').closest('.form-group').addClass('has-error');
		}else{
			$('#numberphone').find('.text-danger').remove();
			$('#numberphone').closest('.form-group').addClass('has-success');
		}
		if (imageuser == "") {
			$('#imageuser').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#imageuser').closest('.form-group').addClass('has-error');
		}else{
			$('#imageuser').find('.text-danger').remove();
			$('#imageuser').closest('.form-group').addClass('has-success');
		}
		if (usernames == "") {
			$('#usernames').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#usernames').closest('.form-group').addClass('has-error');
		}else{
			$('#usernames').find('.text-danger').remove();
			$('#usernames').closest('.form-group').addClass('has-success');
		}
		if (passwords == "" && reapetpassword == "") {
			$('#passwords').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#passwords').closest('.form-group').addClass('has-error');
		}else{
			$('#passwords').find('.text-danger').remove();
			$('#passwords').closest('.form-group').addClass('has-success');
		}
		if (passwords == "" && reapetpassword != "") {
			$('#passwords').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#passwords').closest('.form-group').addClass('has-error');
		}else{
			$('#passwords').find('.text-danger').remove();
			$('#passwords').closest('.form-group').addClass('has-success');
		}
		if (reapetpassword == "" && passwords == "") {
			$('#reapetpassword').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#reapetpassword').closest('.form-group').addClass('has-error');
		}else{
			$('#reapetpassword').find('.text-danger').remove();
			$('#reapetpassword').closest('.form-group').addClass('has-success');
		}
		if (reapetpassword == "" && passwords != "" ) {
			$('#reapetpassword').after('<p class="text-danger" style="font-size:12px">This field is required</p>');
			$('#reapetpassword').closest('.form-group').addClass('has-error');
		}else{
			$('#reapetpassword').find('.text-danger').remove();
			$('#reapetpassword').closest('.form-group').addClass('has-success');
		}
		if (reapetpassword != "" && passwords != "" && reapetpassword != passwords) {
			$('#reapetpassword').after('<p class="text-danger" style="font-size:12px">The password must be identical</p>');
			$('#reapetpassword').closest('.form-group').addClass('has-error');
		}else{
			$('#reapetpassword').find('.text-danger').remove();
			$('#reapetpassword').closest('.form-group').addClass('has-success');
		}
		if (firstname && Lastname && emailuser && numberphone && imageuser && usernames && passwords && reapetpassword) {
				var form = $(this);
				var formData = new FormData(this);
				$.ajax({
					url: form.attr('action'),
					type: form.attr('method'),
					data: formData,
					dataType: 'json',
					cache: false,
					contentType: false,
					processData: false,
					success:function(reponce){
						if (reponce.success == true) {
							$("input[type='text']").val("");
							$("input[type='email']").val("");
							$("input[type='password']").val("");
							$("#message_result").html('<div class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong><i class="glyphicon glyphicon-ok-sign"></i> '+ reponce.message +' <strong></div>');
						}
						if (reponce.success == false) {
							$("#message_result").html('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong><i class="glyphicon glyphicon-remove"></i> '+ reponce.message +' <strong></div>');
						}	
					}
				});
		}
		return false;
	});
});